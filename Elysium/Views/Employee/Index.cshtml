@using Elysium.Models
@model  List<EmployeeViewModel>
@{
    ViewBag.Title = "Home Page";
}


@Html.ActionLink("Create", "Create", "Employee", null, new { @class = "btn btn-info" })

<script type="text/javascript">
     $(document).ready(function () {
         var table =$('#employeeTable').DataTable({
            "paging": true
        })

        $('#employeeTable tbody').on('click', 'td.details-control', function () {
            var tr = $(this).closest('tr');
            var row = table.row(tr);

            if (row.child.isShown()) {
                // This row is already open - close it
                row.child.hide();
                tr.removeClass('shown');
            }
            else {
                // Open this row
                row.child(format(row.data())).show();
                tr.addClass('shown');
            }
        });
    });

    function format(d) {

        return '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">' +
            '<tr>' +
            '<td>SSN:</td>' +
            '<td>' + d[5] + '</td>' +
            '</tr>' +
            '<tr>' +
            '<td>Birth Date:</td>' +
            '<td>' + d[6] + '</td>' +
            '</tr>' +
            '<tr>' +
            '<td>Employment Date:</td>' +
            '<td>' + d[7] + '</td>' +
            '</tr>' +
            '<tr>' +
            '<td>Salary:</td>' +
            '<td>' + d[12] + '</td>' +
            '</tr>' +    
            '</table>';
    }

</script>

<table id="employeeTable" class="table table-striped table-bordered" style="width:100%">
    <thead>
        <tr>
            <th></th>
            <th style="padding-right:10px">
                First Name
            </th>
            <th style="padding-right:10px">
                Middle Name
            </th>
            <th style="padding-right:10px">
                Last Name
            </th>
            <th style="padding-right:10px">
                Phone Number
            </th>
            <th style="display:none">
                SSN
            </th>
            <th style="display:none">
                Birth Date
            </th>
            <th style="display:none">
                Employment Date
            </th>
            <th style="padding-right:10px">
                Email Address
            </th>
            <th style="padding-right:10px">
                Department
            </th>
            <th style="padding-right:10px">
                Position
            </th>
            <th style="padding-right:10px">
                Office
            </th>
            <th style="display:none">
                Salary
            </th>
            <th style="display:none">
                Currency
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td class="details-control"></td>
                <td align="center">@item.FirstName</td>

                <td align="center">@item.MiddleName</td>

                <td align="center">@item.LastName</td>

                <td align="center">@item.PhoneNumber</td>

                <td style="display:none">@item.SSN</td>

                <td style="display:none">@item.BirthDate.ToShortDateString()</td>

                <td style="display:none">@item.EmploymentDate.ToShortDateString()</td>

                <td align="center">@item.EmailAddress</td>

                <td align="center">@item.Department</td>

                <td align="center">@item.Position</td>

                <td align="center">@item.Office</td>

                <td style="display:none">@item.Salary</td>

                <td style="display:none">@item.Currency</td>
            </tr>
        }
    </tbody>
</table>

<style>
    td.details-control {
    background: url('../../Content/Images/details_open.png') no-repeat center center;
    cursor: pointer;
}
tr.shown td.details-control {
    background: url('../../Content/Images/details_close.png') no-repeat center center;
}
</style>